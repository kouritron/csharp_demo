

# ----------------------------------------------------------------------------------------------------------------------
# ----------------------------------------------------------------------------------------------------------------------
# there is .NET SDK and there is runtime .NET SDK seems similar to OpenJDK,
# and the runtime would be comparable to OpenJRE

# Get SDK or runtime from ubuntu snap store:
sudo snap install dotnet-sdk --classic --channel=6.0
sudo snap install dotnet-runtime-60 --classic

# or to avoid the below bug:
sudo snap install dotnet-sdk --classic --channel=latest/edge

# ----------------------------------------------------------------------------------------------------------------------
# ----------------------------------------------------------------------------------------------------------------------
# ------------------------------------------------------------------------------------------------------- permission bug
# after snap install we should have a "dotnet" command available, but there is a bug w/ the snap package permissions.
# It should work as is, but doesnt. it says permission denied. Adding a sudo would "fix it", but now if you
# install anything they would be root owned and you have to manually chown and chmod directories

# ---------- for example these work:
$ sudo dotnet --list-sdks
6.0.100 [/snap/dotnet-sdk/147/sdk]

$ sudo dotnet-sdk.dotnet --version
6.0.100


# ---------- but this does not work:
$ dotnet --list-sdks
cannot snap-exec: cannot exec "/snap/dotnet-sdk/147/snap/command-chain/snapcraft-runner": permission denied

# ---------- this is a upstream bug.
# A number of workarounds are suggested here: https://github.com/dotnet/core/issues/4446

# one solution that worked for now is, switching to latest/edge channel:
$ sudo snap remove dotnet-sdk
$ sudo snap install dotnet-sdk --classic --channel=latest/edge

# unfortunately this ends up with 5 not 6. none of the 6 channels fix this problem right now.
# so now we have:
$ dotnet --version
5.0.202

$ dotnet --list-runtimes
Microsoft.AspNetCore.App 5.0.5 [/snap/dotnet-sdk/120/shared/Microsoft.AspNetCore.App]
Microsoft.NETCore.App 5.0.5 [/snap/dotnet-sdk/120/shared/Microsoft.NETCore.App]

$ dotnet --list-sdks
5.0.202 [/snap/dotnet-sdk/120/sdk]

# ---------- Another alternative is avoiding the snap package and get a debian package:
# https://docs.microsoft.com/en-us/dotnet/core/install/linux-scripted-manual#scripted-install


# ---------- Better alternative:
# run everything as root inside a docker container, have vscode remote into it, for now until we figure out what
# the hell is going on. This should get fixed soon also. its been getting repeatedly fixed, regressed, fixed,
# regressed, .... on github for nearly 1 year by the looks of it.


# ----------------------------------------------------------------------------------------------------------------------
# ----------------------------------------------------------------------------------------------------------------------
# --------------------------------------------------------------------------------------------------------- dotnet hello







